<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>第6回演習課題</title>

  <script src="https://unpkg.com/three@0.137.4/build/three.min.js"></script>
  <script src="https://unpkg.com/three@0.137.4/examples/js/controls/OrbitControls.js"></script>

</head>
<body>
  <div>
    <h3>第6回演習課題</h3>
    学籍番号: 2032067
  </div>

  <div id="renderspace">
  </div>

  <div id="settings">
    <div>
      ・Lighting Control<br>
      Light1: <input type="color" id="light1" value="#ffffff"><br>
      Light2: <input type="color" id="light2" value="#ffffff"><br>
      Light3: <input type="color" id="light3" value="#ffffff"><br>
    </div>
    <br>
    <div>
      ・Object Color Control<br>
      TorusKnot: <input type="color" id="torus-knot" value="#00ff00"><br>
    </div>
    <br>
    <div>
      Background: <input type="color" id="bg-color" value="#000000"><br>
      <br>
      <div>
        <label><input type="checkbox" id="enable-damping">Enable Damping</label><br>
        <label><input type="checkbox" id="auto-rotate">Auto Rotate</label><br>
        <label>Auto Rotate Speed <input type="range" id="auto-rotate-speed" name="volume" min="0.1" max="10" step="0.1" value="1"></label><br>
      </div>
      <br>
      <div id="camera_coordinates"></div>
      <div id="auto_rotate_speed"></div>
    </div>
  </div>
 <script>

   const init = () => {
  
   const width = 800;
   const height = 600;
   const renderDiv = document.getElementById("renderspace");

   let rot = 0;
  
    // レンダラーを作成
    const renderer = new THREE.WebGLRenderer();
    renderer.setSize(width, height);

    renderDiv.appendChild(renderer.domElement);
  
    // シーンを作成
    const scene = new THREE.Scene();

    // カメラを作成
    const camera = new THREE.PerspectiveCamera(45, width / height, 1, 1000);
    camera.position.set(25, 25, 125);  //位置を指定
    camera.lookAt(0, 0, 0); //見つめる方向

    const controls = new THREE.OrbitControls(camera, renderDiv);

    
    // 平行光源
    const directionalLight1 = new THREE.DirectionalLight(0xffffff);
    directionalLight1.position.set(100, 0, 0);   //位置を指定f
    scene.add(directionalLight1);     // シーンに追加

    const directionalLight2 = new THREE.DirectionalLight(0xffffff);
    directionalLight2.position.set(0, 100, 0);   //位置を指定
    scene.add(directionalLight2);     // シーンに追加

    const directionalLight3 = new THREE.DirectionalLight(0xffffff);
    directionalLight3.position.set(0, 0, 100);   //位置を指定
    scene.add(directionalLight3);     // シーンに追加
      
    // helper
    const gridHelper = new THREE.GridHelper(100, 10); // size, step
    scene.add(gridHelper);
    const axisHelper = new THREE.AxesHelper(100); //軸の長さ　X：赤、Y：緑、z：青
    scene.add(axisHelper);

    const bodyGeometory = new THREE.SphereGeometry(5, 32, 32);
    const bodyMaterial = new THREE.MeshPhongMaterial({color: 0xfc9db8});
    const body = new THREE.Mesh(bodyGeometory, bodyMaterial);
    body.position.set(0, 6, 0);
    scene.add(body);




    // const torusKnotGeometry = new THREE.TorusKnotGeometry( 10, 2.5, 30, 10, 13, 9);
    // const material1 = new THREE.MeshPhongMaterial({ color: 0x00ff00 });
    // const torusKnot = new THREE.Mesh( torusKnotGeometry, material1 );
    // scene.add(torusKnot);
  
    // 初回実行
    const update = () => {
      requestAnimationFrame(update);

    //   torusKnot.rotation.x += 0.02;
    //   torusKnot.rotation.y += 0.04;

      // Lighting controller
      directionalLight1.color.setStyle(document.getElementById("light1").value);
      directionalLight2.color.setStyle(document.getElementById("light2").value);
      directionalLight3.color.setStyle(document.getElementById("light3").value);
      renderer.setClearColor(new THREE.Color().setStyle(document.getElementById("bg-color").value), 1.0);

      // Object color controller
      // torusKnot.material.color.setStyle(document.getElementById("torus-knot").value);

      // Orbit controller
      controls.enableDamping = document.getElementById("enable-damping").checked;
      controls.autoRotate = document.getElementById("auto-rotate").checked;
      controls.autoRotateSpeed = document.getElementById("auto-rotate-speed").value;

      let coordinatesSpace = document.getElementById("camera_coordinates");
      let rotateSpeedSpace = document.getElementById("auto_rotate_speed");
      coordinatesSpace.innerHTML = `Camera Coordinates: ${camera.position.x.toFixed(2)}, ${camera.position.y.toFixed(2)}, ${camera.position.z.toFixed(2)}`;
      rotateSpeedSpace.innerHTML = `Auto Rotate Speed: ${document.getElementById("auto-rotate-speed").value}`;

      controls.update();
      renderer.render(scene, camera);
    };
    update();
  }

  window.addEventListener('DOMContentLoaded', init);

</script>
</body>
</html>